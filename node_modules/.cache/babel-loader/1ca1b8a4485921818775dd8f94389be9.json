{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Navigate}from'react-router-dom';import{useSelector}from\"react-redux\";import ResponsiveDrawer from'../components/ResponsiveDrawer';import CircularLoading from\"../components/CircularLoading\";import{jsx as _jsx}from\"react/jsx-runtime\";function matchUser(permit,usertype){let permitions=permit?permit.split(','):[];let permitted=false;for(let i=0;i<permitions.length;i++){permitted=usertype===permitions[i]?true:false;if(permitted)break;}return permitted;}function ProtectedRoute(_ref){let{permit,children}=_ref;const auth=useSelector(state=>state.auth);const[checkedAuth,setCheckedAuth]=useState(false);useEffect(()=>{if(auth.profile&&auth.profile.uid){setCheckedAuth(true);}if(auth.error&&auth.error.msg&&!auth.profile){setCheckedAuth(true);}},[auth.profile,auth.error]);return checkedAuth?auth.profile&&auth.profile.uid?matchUser(permit,auth.profile.usertype)?/*#__PURE__*/_jsx(ResponsiveDrawer,{children:children}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"}):/*#__PURE__*/_jsx(CircularLoading,{});}export default ProtectedRoute;","map":{"version":3,"names":["React","useEffect","useState","Navigate","useSelector","ResponsiveDrawer","CircularLoading","jsx","_jsx","matchUser","permit","usertype","permitions","split","permitted","i","length","ProtectedRoute","_ref","children","auth","state","checkedAuth","setCheckedAuth","profile","uid","error","msg","to"],"sources":["C:/Users/CAJAL/Desktop/main/Sourcecode/web-app/src/views/ProtectedRoute.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport {Navigate} from 'react-router-dom';\nimport { useSelector } from \"react-redux\";\nimport ResponsiveDrawer from '../components/ResponsiveDrawer';\nimport CircularLoading from \"../components/CircularLoading\";\n\nfunction matchUser(permit, usertype){\n    let permitions = permit? permit.split(',') : [];\n    let permitted = false;\n    for(let i=0;i<permitions.length;i++){\n        permitted = usertype === permitions[i]?true:false\n        if(permitted) break;\n    }\n    return permitted;\n}\n\nfunction ProtectedRoute({ permit,children }) {\n    const auth = useSelector(state => state.auth);\n    const [checkedAuth,setCheckedAuth] = useState(false);\n\n    useEffect(()=>{\n        if(auth.profile && auth.profile.uid){\n            setCheckedAuth(true);\n        }\n        if(auth.error && auth.error.msg && !auth.profile){\n            setCheckedAuth(true);\n        }\n    },[auth.profile,auth.error])\n\n    return(\n        checkedAuth?\n            auth.profile && auth.profile.uid?\n                matchUser(permit,auth.profile.usertype) ? <ResponsiveDrawer>{children}</ResponsiveDrawer>:<Navigate to=\"/login\" />\n            :<Navigate to=\"/login\" /> \n        :<CircularLoading/>\n    )\n}\n\nexport default ProtectedRoute;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAAQC,QAAQ,KAAO,kBAAkB,CACzC,OAASC,WAAW,KAAQ,aAAa,CACzC,MAAO,CAAAC,gBAAgB,KAAM,gCAAgC,CAC7D,MAAO,CAAAC,eAAe,KAAM,+BAA+B,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE5D,QAAS,CAAAC,SAASA,CAACC,MAAM,CAAEC,QAAQ,CAAC,CAChC,GAAI,CAAAC,UAAU,CAAGF,MAAM,CAAEA,MAAM,CAACG,KAAK,CAAC,GAAG,CAAC,CAAG,EAAE,CAC/C,GAAI,CAAAC,SAAS,CAAG,KAAK,CACrB,IAAI,GAAI,CAAAC,CAAC,CAAC,CAAC,CAACA,CAAC,CAACH,UAAU,CAACI,MAAM,CAACD,CAAC,EAAE,CAAC,CAChCD,SAAS,CAAGH,QAAQ,GAAKC,UAAU,CAACG,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CACjD,GAAGD,SAAS,CAAE,MAClB,CACA,MAAO,CAAAA,SAAS,CACpB,CAEA,QAAS,CAAAG,cAAcA,CAAAC,IAAA,CAAsB,IAArB,CAAER,MAAM,CAACS,QAAS,CAAC,CAAAD,IAAA,CACvC,KAAM,CAAAE,IAAI,CAAGhB,WAAW,CAACiB,KAAK,EAAIA,KAAK,CAACD,IAAI,CAAC,CAC7C,KAAM,CAACE,WAAW,CAACC,cAAc,CAAC,CAAGrB,QAAQ,CAAC,KAAK,CAAC,CAEpDD,SAAS,CAAC,IAAI,CACV,GAAGmB,IAAI,CAACI,OAAO,EAAIJ,IAAI,CAACI,OAAO,CAACC,GAAG,CAAC,CAChCF,cAAc,CAAC,IAAI,CAAC,CACxB,CACA,GAAGH,IAAI,CAACM,KAAK,EAAIN,IAAI,CAACM,KAAK,CAACC,GAAG,EAAI,CAACP,IAAI,CAACI,OAAO,CAAC,CAC7CD,cAAc,CAAC,IAAI,CAAC,CACxB,CACJ,CAAC,CAAC,CAACH,IAAI,CAACI,OAAO,CAACJ,IAAI,CAACM,KAAK,CAAC,CAAC,CAE5B,MACI,CAAAJ,WAAW,CACPF,IAAI,CAACI,OAAO,EAAIJ,IAAI,CAACI,OAAO,CAACC,GAAG,CAC5BhB,SAAS,CAACC,MAAM,CAACU,IAAI,CAACI,OAAO,CAACb,QAAQ,CAAC,cAAGH,IAAA,CAACH,gBAAgB,EAAAc,QAAA,CAAEA,QAAQ,CAAmB,CAAC,cAACX,IAAA,CAACL,QAAQ,EAACyB,EAAE,CAAC,QAAQ,CAAE,CAAC,cACrHpB,IAAA,CAACL,QAAQ,EAACyB,EAAE,CAAC,QAAQ,CAAE,CAAC,cAC5BpB,IAAA,CAACF,eAAe,GAAC,CAAC,CAE3B,CAEA,cAAe,CAAAW,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module"}