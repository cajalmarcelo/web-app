{"ast":null,"code":"import _objectWithoutProperties from\"C:/Users/CAJAL/Desktop/main/Sourcecode/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";import _objectSpread from\"C:/Users/CAJAL/Desktop/main/Sourcecode/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";const _excluded=[\"tableData\"];import React,{useState,useEffect,useRef}from\"react\";import{downloadCsv}from\"../common/sharedFunctions\";import MaterialTable from\"material-table\";import{useSelector}from\"react-redux\";import CircularLoading from\"../components/CircularLoading\";import{useTranslation}from\"react-i18next\";import{useParams}from\"react-router-dom\";import{useNavigate,useLocation}from\"react-router-dom\";import moment from\"moment/min/moment-with-locales\";import{SECONDORY_COLOR}from\"../common/sharedFunctions\";import{colors}from\"../components/Theme/WebTheme\";import{ThemeProvider}from'@mui/material/styles';import theme from\"styles/tableStyle\";import TableStyle from'../components/Table/Style';import localization from'../components/Table/Localization';import GoBackButton from\"components/GoBackButton\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function UserRides(_ref){let{data,tabid}=_ref;const{id}=useParams();const{t,i18n}=useTranslation();const isRTL=i18n.dir();const bookinglistdata=useSelector(state=>state.bookinglistdata);const settings=useSelector(state=>state.settingsdata.settings);const loaded=useRef(false);const[bookingData,setBookingData]=useState([]);const navigate=useNavigate();const[selectedRow,setSelectedRow]=useState(null);const{state}=useLocation();useEffect(()=>{if(bookinglistdata.bookings){if(data.usertype===\"customer\"){setBookingData(bookinglistdata.bookings.filter(item=>item.customer===id));}else if(data.usertype===\"driver\"){setBookingData(bookinglistdata.bookings.filter(item=>item.driver===id));}}else{setBookingData([]);}loaded.current=true;},[bookinglistdata.bookings,id,data]);const col=[{title:t(\"booking_status\"),field:\"status\",render:rowData=>/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:rowData.status===\"CANCELLED\"?colors.RED:rowData.status===\"COMPLETE\"?colors.GREEN:colors.YELLOW,color:\"white\",padding:7,borderRadius:\"15px\",fontWeight:\"bold\",width:\"150px\",margin:\"auto\"},children:t(rowData.status)})},{title:t(\"booking_ref\"),field:\"reference\"},{title:t(\"booking_date\"),field:\"bookingDate\",render:rowData=>rowData.bookingDate?moment(rowData.bookingDate).format(\"lll\"):null},{title:t(\"pickup_address\"),field:\"pickupAddress\"},{title:t(\"drop_address\"),field:\"dropAddress\"}];return!loaded.current?/*#__PURE__*/_jsx(CircularLoading,{}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:colors.LandingPage_Background,borderRadius:10,display:\"flex\",justifyContent:\"center\",flexDirection:\"column\"},children:[/*#__PURE__*/_jsx(GoBackButton,{isRTL:isRTL,onClick:()=>{navigate(\"/users/\".concat(tabid),{state:{pageNo:state===null||state===void 0?void 0:state.pageNo}});}}),/*#__PURE__*/_jsx(ThemeProvider,{theme:theme,children:/*#__PURE__*/_jsx(MaterialTable,{title:t(\"bookings_table_title\"),columns:col,style:{direction:isRTL===\"rtl\"?\"rtl\":\"ltr\",borderRadius:\"8px\",boxShadow:\"0px 2px 5px \".concat(SECONDORY_COLOR),width:\"100%\"},data:bookingData,onRowClick:(evt,selectedRow)=>setSelectedRow(selectedRow.tableData.id),options:_objectSpread({exportCsv:(columns,data)=>{let hArray=[];const headerRow=columns.map(col=>{if(typeof col.title===\"object\"){return col.title.props.text;}hArray.push(col.field);return col.title;});const dataRows=data.map(_ref2=>{let{tableData}=_ref2,row=_objectWithoutProperties(_ref2,_excluded);row.createdAt=new Date(row.createdAt).toLocaleDateString()+\" \"+new Date(row.createdAt).toLocaleTimeString();let dArr=[];for(let i=0;i<hArray.length;i++){dArr.push(row[hArray[i]]);}return Object.values(dArr);});const{exportDelimiter}=\",\";const delimiter=exportDelimiter?exportDelimiter:\",\";const csvContent=[headerRow,...dataRows].map(e=>e.join(delimiter)).join(\"\\n\");const csvFileName=\"download.csv\";downloadCsv(csvContent,csvFileName);},exportButton:{csv:settings.AllowCriticalEditsAdmin,pdf:false},maxColumnSort:\"all_columns\",rowStyle:rowData=>({backgroundColor:selectedRow===rowData.tableData.id?colors.THIRDCOLOR:colors.WHITE})},TableStyle()),localization:localization(t)})})]})});}","map":{"version":3,"names":["React","useState","useEffect","useRef","downloadCsv","MaterialTable","useSelector","CircularLoading","useTranslation","useParams","useNavigate","useLocation","moment","SECONDORY_COLOR","colors","ThemeProvider","theme","TableStyle","localization","GoBackButton","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UserRides","_ref","data","tabid","id","t","i18n","isRTL","dir","bookinglistdata","state","settings","settingsdata","loaded","bookingData","setBookingData","navigate","selectedRow","setSelectedRow","bookings","usertype","filter","item","customer","driver","current","col","title","field","render","rowData","style","backgroundColor","status","RED","GREEN","YELLOW","color","padding","borderRadius","fontWeight","width","margin","children","bookingDate","format","LandingPage_Background","display","justifyContent","flexDirection","onClick","concat","pageNo","columns","direction","boxShadow","onRowClick","evt","tableData","options","_objectSpread","exportCsv","hArray","headerRow","map","props","text","push","dataRows","_ref2","row","_objectWithoutProperties","_excluded","createdAt","Date","toLocaleDateString","toLocaleTimeString","dArr","i","length","Object","values","exportDelimiter","delimiter","csvContent","e","join","csvFileName","exportButton","csv","AllowCriticalEditsAdmin","pdf","maxColumnSort","rowStyle","THIRDCOLOR","WHITE"],"sources":["C:/Users/CAJAL/Desktop/main/Sourcecode/web-app/src/views/UserRides.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { downloadCsv } from \"../common/sharedFunctions\";\nimport MaterialTable from \"material-table\";\nimport { useSelector } from \"react-redux\";\nimport CircularLoading from \"../components/CircularLoading\";\nimport { useTranslation } from \"react-i18next\";\nimport { useParams } from \"react-router-dom\";\nimport { useNavigate,useLocation } from \"react-router-dom\";\nimport moment from \"moment/min/moment-with-locales\";\nimport { SECONDORY_COLOR } from \"../common/sharedFunctions\";\nimport { colors } from \"../components/Theme/WebTheme\";\nimport { ThemeProvider } from '@mui/material/styles';\nimport theme from \"styles/tableStyle\";\nimport TableStyle from '../components/Table/Style';\nimport localization from '../components/Table/Localization';\nimport GoBackButton from \"components/GoBackButton\";\n\nexport default function UserRides({data,tabid}) {\n  const { id} = useParams();\n  const { t, i18n } = useTranslation();\n  const isRTL = i18n.dir();\n  const bookinglistdata = useSelector((state) => state.bookinglistdata);\n  const settings = useSelector((state) => state.settingsdata.settings);\n  const loaded = useRef(false);\n  const [bookingData, setBookingData] = useState([]);\n  const navigate = useNavigate();\n  const [selectedRow, setSelectedRow] = useState(null);\n  const {state} = useLocation()\n\n  useEffect(() => {\n    if (bookinglistdata.bookings) {\n\n        if(data.usertype=== \"customer\"){\n            setBookingData(\n                bookinglistdata.bookings.filter((item) => item.customer === id)\n                );\n        }\n        else if (data.usertype=== \"driver\"){\n            setBookingData(\n                bookinglistdata.bookings.filter((item) => item.driver === id)\n              );\n        }\n\n    } else {\n      setBookingData([]);\n    }\n    loaded.current = true;\n\n\n  }, [bookinglistdata.bookings, id,data]);\n\n  const col = [\n    {\n      title: t(\"booking_status\"),\n      field: \"status\",\n      render: (rowData) => (\n        <div\n          style={{\n            backgroundColor:\n              rowData.status === \"CANCELLED\"\n                ? colors.RED\n                : rowData.status === \"COMPLETE\"\n                ? colors.GREEN\n                : colors.YELLOW,\n            color: \"white\",\n            padding: 7,\n            borderRadius: \"15px\",\n            fontWeight: \"bold\",\n            width: \"150px\",\n            margin: \"auto\",\n          }}\n        >\n          {t(rowData.status)}\n        </div>\n      ),\n    },\n    {\n      title: t(\"booking_ref\"),\n      field: \"reference\",\n    },\n    {\n      title: t(\"booking_date\"),\n      field: \"bookingDate\",\n      render: (rowData) =>\n        rowData.bookingDate ? moment(rowData.bookingDate).format(\"lll\") : null,\n    },\n    {\n      title: t(\"pickup_address\"),\n      field: \"pickupAddress\",\n    },\n    {\n      title: t(\"drop_address\"),\n      field: \"dropAddress\",\n    },\n  ];\n\n  return !loaded.current ? (\n    <CircularLoading />\n  ) : (\n    <>\n      <div\n        style={{\n          backgroundColor: colors.LandingPage_Background,\n          borderRadius: 10,\n          display: \"flex\",\n          justifyContent: \"center\",\n          flexDirection: \"column\",\n        }}\n      >\n        <GoBackButton isRTL={isRTL}  onClick={() => {\n              navigate(`/users/${tabid}`,{state:{pageNo:state?.pageNo}});\n            }} />\n        <ThemeProvider theme={theme}>\n          <MaterialTable\n            title={t(\"bookings_table_title\")}\n            columns={col}\n            style={{\n              direction: isRTL === \"rtl\" ? \"rtl\" : \"ltr\",\n              borderRadius: \"8px\",\n              boxShadow: `0px 2px 5px ${SECONDORY_COLOR}`,\n              width: \"100%\",\n            }}\n            data={bookingData}\n            onRowClick={(evt, selectedRow) =>\n              setSelectedRow(selectedRow.tableData.id)\n            }\n            options={{\n              exportCsv: (columns, data) => {\n                let hArray = [];\n                const headerRow = columns.map((col) => {\n                  if (typeof col.title === \"object\") {\n                    return col.title.props.text;\n                  }\n                  hArray.push(col.field);\n                  return col.title;\n                });\n                const dataRows = data.map(({ tableData, ...row }) => {\n                  row.createdAt =\n                    new Date(row.createdAt).toLocaleDateString() +\n                    \" \" +\n                    new Date(row.createdAt).toLocaleTimeString();\n                  let dArr = [];\n                  for (let i = 0; i < hArray.length; i++) {\n                    dArr.push(row[hArray[i]]);\n                  }\n                  return Object.values(dArr);\n                });\n                const { exportDelimiter } = \",\";\n                const delimiter = exportDelimiter ? exportDelimiter : \",\";\n                const csvContent = [headerRow, ...dataRows]\n                  .map((e) => e.join(delimiter))\n                  .join(\"\\n\");\n                const csvFileName = \"download.csv\";\n                downloadCsv(csvContent, csvFileName);\n              },\n              exportButton: {\n                csv: settings.AllowCriticalEditsAdmin,\n                pdf: false,\n              },\n              maxColumnSort: \"all_columns\",\n              rowStyle: rowData => ({\n                backgroundColor: (selectedRow === rowData.tableData.id) ? colors.THIRDCOLOR : colors.WHITE\n              }),\n              ...TableStyle()\n            }}\n            localization={localization(t)}\n          />\n        </ThemeProvider>\n      </div>\n    </>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}