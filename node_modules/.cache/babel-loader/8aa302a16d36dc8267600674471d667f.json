{"ast":null,"code":"import _objectWithoutProperties from\"C:/Users/CAJAL/Desktop/main/Sourcecode/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";import _objectSpread from\"C:/Users/CAJAL/Desktop/main/Sourcecode/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";const _excluded=[\"tableData\"];import React,{useState,useEffect}from'react';import{downloadCsv}from'../common/sharedFunctions';import MaterialTable from\"material-table\";import CircularLoading from\"../components/CircularLoading\";import{useSelector,useDispatch}from\"react-redux\";import{api}from'common';import{useTranslation}from\"react-i18next\";import moment from'moment/min/moment-with-locales';import{colors}from'../components/Theme/WebTheme';import{SECONDORY_COLOR}from\"../common/sharedFunctions\";import{ThemeProvider}from'@mui/material/styles';import theme from\"styles/tableStyle\";import TableStyle from'../components/Table/Style';import localization from'../components/Table/Localization';import{jsx as _jsx}from\"react/jsx-runtime\";const Withdraws=()=>{const{t,i18n}=useTranslation();const isRTL=i18n.dir();const settings=useSelector(state=>state.settingsdata.settings);const{completeWithdraw}=api;const dispatch=useDispatch();const columns=[{title:'ID',field:'id',editable:'never'},{title:t('requestDate'),field:'date',defaultSort:'desc',render:rowData=>rowData.date?moment(rowData.date).format('lll'):null,exportTransformer:rowData=>new Date(rowData.date).toLocaleDateString()+' '+new Date(rowData.date).toLocaleTimeString()},{title:t('driver_name'),field:'name',editable:'never'},{title:t('amount'),field:'amount',editable:'never',render:rowData=>rowData.amount?settings.swipe_symbol?rowData.amount+\" \"+settings.symbol:settings.symbol+\" \"+rowData.amount:settings.swipe_symbol?\"0 \"+settings.symbol:settings.symbol+\" 0\"},{title:t('processed'),field:'processed',type:'boolean',editable:'never'},{title:t('processDate'),field:'processDate',render:rowData=>rowData.processDate?moment(rowData.processDate).format('lll'):null},{title:t('bankName'),field:'bankName',hidden:settings.bank_fields===false?true:false,editable:'never'},{title:t('bankCode'),field:'bankCode',hidden:settings.bank_fields===false?true:false,editable:'never'},{title:t('bankAccount'),field:'bankAccount',hidden:settings.bank_fields===false?true:false,editable:'never'}];const[data,setData]=useState([]);const withdrawdata=useSelector(state=>state.withdrawdata);useEffect(()=>{if(withdrawdata.withdraws){setData(withdrawdata.withdraws);}else{setData([]);}},[withdrawdata.withdraws]);const[selectedRow,setSelectedRow]=useState(null);return withdrawdata.loading?/*#__PURE__*/_jsx(CircularLoading,{}):/*#__PURE__*/_jsx(ThemeProvider,{theme:theme,children:/*#__PURE__*/_jsx(MaterialTable,{title:t('Withdraw_title'),columns:columns,style:{direction:isRTL===\"rtl\"?\"rtl\":\"ltr\",borderRadius:\"8px\",boxShadow:\"0px 2px 5px \".concat(SECONDORY_COLOR),padding:\"20px\"},data:data,onRowClick:(evt,selectedRow)=>setSelectedRow(selectedRow.tableData.id),options:_objectSpread({exportCsv:(columns,data)=>{let hArray=[];const headerRow=columns.map(col=>{if(typeof col.title==='object'){return col.title.props.text;}hArray.push(col.field);return col.title;});const dataRows=data.map(_ref=>{let{tableData}=_ref,row=_objectWithoutProperties(_ref,_excluded);row.date=new Date(row.date).toLocaleDateString()+' '+new Date(row.date).toLocaleTimeString();row.processDate=row.processDate?new Date(row.processDate).toLocaleDateString()+' '+new Date(row.processDate).toLocaleTimeString():'';let dArr=[];for(let i=0;i<hArray.length;i++){dArr.push(row[hArray[i]]);}return Object.values(dArr);});const{exportDelimiter}=\",\";const delimiter=exportDelimiter?exportDelimiter:\",\";const csvContent=[headerRow,...dataRows].map(e=>e.join(delimiter)).join(\"\\n\");const csvFileName='download.csv';downloadCsv(csvContent,csvFileName);},exportButton:{csv:settings.AllowCriticalEditsAdmin,pdf:false},rowStyle:rowData=>({backgroundColor:selectedRow===rowData.tableData.id?colors.ROW_SELECTED:colors.WHITE})},TableStyle()),localization:localization(t),actions:[rowData=>({icon:'check',tooltip:t('process_withdraw'),disabled:rowData.processed,onClick:(event,rowData)=>{dispatch(completeWithdraw(rowData));}})]})});};export default Withdraws;","map":{"version":3,"names":["React","useState","useEffect","downloadCsv","MaterialTable","CircularLoading","useSelector","useDispatch","api","useTranslation","moment","colors","SECONDORY_COLOR","ThemeProvider","theme","TableStyle","localization","jsx","_jsx","Withdraws","t","i18n","isRTL","dir","settings","state","settingsdata","completeWithdraw","dispatch","columns","title","field","editable","defaultSort","render","rowData","date","format","exportTransformer","Date","toLocaleDateString","toLocaleTimeString","amount","swipe_symbol","symbol","type","processDate","hidden","bank_fields","data","setData","withdrawdata","withdraws","selectedRow","setSelectedRow","loading","children","style","direction","borderRadius","boxShadow","concat","padding","onRowClick","evt","tableData","id","options","_objectSpread","exportCsv","hArray","headerRow","map","col","props","text","push","dataRows","_ref","row","_objectWithoutProperties","_excluded","dArr","i","length","Object","values","exportDelimiter","delimiter","csvContent","e","join","csvFileName","exportButton","csv","AllowCriticalEditsAdmin","pdf","rowStyle","backgroundColor","ROW_SELECTED","WHITE","actions","icon","tooltip","disabled","processed","onClick","event"],"sources":["C:/Users/CAJAL/Desktop/main/Sourcecode/web-app/src/views/Withdraws.js"],"sourcesContent":["import React,{ useState, useEffect } from 'react';\nimport { downloadCsv } from '../common/sharedFunctions';\nimport MaterialTable from \"material-table\";\nimport CircularLoading from \"../components/CircularLoading\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { api } from 'common';\nimport { useTranslation } from \"react-i18next\";\nimport moment from 'moment/min/moment-with-locales';\nimport {colors} from '../components/Theme/WebTheme';\nimport { SECONDORY_COLOR } from \"../common/sharedFunctions\";\nimport { ThemeProvider } from '@mui/material/styles';\nimport theme from \"styles/tableStyle\";\nimport TableStyle from '../components/Table/Style';\nimport localization from '../components/Table/Localization';\n\nconst Withdraws = () => {\n  const { t,i18n } = useTranslation();\n  const isRTL = i18n.dir();\n  const settings = useSelector(state => state.settingsdata.settings);\n  const {\n    completeWithdraw\n  } = api;\n  const dispatch = useDispatch();\n\n  const columns =  [\n    { title: 'ID', field: 'id',editable: 'never',\n  },\n    { title: t('requestDate'), field: 'date', defaultSort:'desc', render: rowData => rowData.date ? moment(rowData.date).format('lll') : null,\n              exportTransformer: (rowData) => new Date(rowData.date).toLocaleDateString() + ' '+ new Date(rowData.date).toLocaleTimeString()},\n    { title: t('driver_name'),field: 'name',editable: 'never', \n  },\n  { title: t('amount'), field: 'amount',editable: 'never',\n    render: (rowData) =>\n    rowData.amount\n    ? settings.swipe_symbol\n    ? rowData.amount + \" \" + settings.symbol\n    : settings.symbol + \" \" + rowData.amount\n    : settings.swipe_symbol\n    ? \"0 \" + settings.symbol\n    : settings.symbol + \" 0\",\n  },\n    { title: t('processed'), field: 'processed', type: 'boolean',editable: 'never', \n  },  \n    { title: t('processDate'), field: 'processDate', render: rowData => rowData.processDate ? moment(rowData.processDate).format('lll') : null,\n  },\n    { title: t('bankName'), field: 'bankName', hidden: settings.bank_fields===false? true: false,editable: 'never'},\n    { title: t('bankCode'), field: 'bankCode' , hidden: settings.bank_fields===false? true: false,editable: 'never'},\n    { title: t('bankAccount'), field: 'bankAccount', hidden: settings.bank_fields===false? true: false,editable: 'never'}\n  ];\n  const [data, setData] = useState([]);\n  const withdrawdata = useSelector(state => state.withdrawdata);\n\n  useEffect(()=>{\n        if(withdrawdata.withdraws){\n            setData(withdrawdata.withdraws);\n        }else{\n          setData([]);\n        }\n  },[withdrawdata.withdraws]);\n\n  const [selectedRow, setSelectedRow] = useState(null);\n  return (\n    withdrawdata.loading? <CircularLoading/>:\n    <ThemeProvider theme={theme}>\n    <MaterialTable\n      title={t('Withdraw_title')}\n      columns={columns}\n      style={{\n        direction: isRTL === \"rtl\" ? \"rtl\" : \"ltr\",\n        borderRadius: \"8px\",\n        boxShadow: `0px 2px 5px ${SECONDORY_COLOR}`,\n        padding: \"20px\",\n      }}\n      data={data}\n      onRowClick={((evt, selectedRow) => setSelectedRow(selectedRow.tableData.id))}\n      options={{\n        exportCsv: (columns, data) => {\n          let hArray = [];\n          const headerRow = columns.map(col => {\n            if (typeof col.title === 'object') {\n              return col.title.props.text;\n            }\n            hArray.push(col.field);\n            return col.title;\n          });\n          const dataRows = data.map(({ tableData, ...row }) => {\n            row.date = new Date(row.date).toLocaleDateString() + ' '+ new Date(row.date).toLocaleTimeString()\n            row.processDate = row.processDate? new Date(row.processDate).toLocaleDateString() + ' '+ new Date(row.processDate).toLocaleTimeString(): ''\n            let dArr = [];\n            for(let i=0;i< hArray.length; i++) {\n              dArr.push(row[hArray[i]]);\n            }\n            return Object.values(dArr);\n          })\n          const { exportDelimiter } = \",\";\n          const delimiter = exportDelimiter ? exportDelimiter : \",\";\n          const csvContent = [headerRow, ...dataRows].map(e => e.join(delimiter)).join(\"\\n\");\n          const csvFileName = 'download.csv';\n          downloadCsv(csvContent, csvFileName);\n        },\n        exportButton: {\n          csv: settings.AllowCriticalEditsAdmin,\n          pdf: false,\n        },\n        rowStyle: (rowData) => ({\n          backgroundColor:\n            selectedRow === rowData.tableData.id ? colors.ROW_SELECTED :colors.WHITE\n        }),\n        ...TableStyle()\n      }}\n      localization={localization(t)}\n      actions={[\n        rowData => ({\n          icon: 'check',\n          tooltip: t('process_withdraw'),\n          disabled: rowData.processed,\n          onClick: (event, rowData) => {\n            dispatch(completeWithdraw(rowData));\n          }\n        }),\n      ]}\n    />\n    </ThemeProvider>\n  );\n}\n\nexport default Withdraws;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}