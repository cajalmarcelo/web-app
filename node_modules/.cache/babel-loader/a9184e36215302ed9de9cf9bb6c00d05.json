{"ast":null,"code":"import _objectSpread from\"C:/Users/CAJAL/Desktop/main/Sourcecode/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import MaterialTable from'material-table';import{useSelector,useDispatch}from\"react-redux\";import CircularLoading from\"../components/CircularLoading\";import{api}from'common';import{useTranslation}from\"react-i18next\";import{colors}from'../components/Theme/WebTheme';import{useNavigate,useLocation}from'react-router-dom';import{SECONDORY_COLOR}from\"../common/sharedFunctions\";import moment from'moment/min/moment-with-locales';import{ThemeProvider}from'@mui/material/styles';import theme from\"styles/tableStyle\";import TableStyle from'../components/Table/Style';import localization from'../components/Table/Localization';import BlankTable from'../components/Table/BlankTable';import{jsx as _jsx}from\"react/jsx-runtime\";export default function Notifications(){const{t,i18n}=useTranslation();const isRTL=i18n.dir();const{editNotifications}=api;const columns=[{title:t(\"createdAt\"),field:\"createdAt\",defaultSort:'desc',render:rowData=>rowData.createdAt?moment(rowData.createdAt).format('lll'):null},{title:t('device_type'),field:'devicetype',lookup:{All:t('all'),ANDROID:t('android'),IOS:t('ios')}},{title:t('user_type'),field:'usertype',lookup:{customer:t('customer'),driver:t('driver')}},{title:t('title'),field:'title'},{title:t('body'),field:'body'}];const[data,setData]=useState([]);const notificationdata=useSelector(state=>state.notificationdata);const dispatch=useDispatch();const navigate=useNavigate();const{state}=useLocation();const[currentPage,setCurrentPage]=useState(null);useEffect(()=>{setCurrentPage(state===null||state===void 0?void 0:state.pageNo);},[state]);const HandalePageChange=page=>{setCurrentPage(page);};useEffect(()=>{if(notificationdata.notifications){setData(notificationdata.notifications);}else{setData([]);}},[notificationdata.notifications]);const[selectedRow,setSelectedRow]=useState(null);return notificationdata.loading?/*#__PURE__*/_jsx(CircularLoading,{}):/*#__PURE__*/_jsx(ThemeProvider,{theme:theme,children:data.length>0?/*#__PURE__*/_jsx(MaterialTable,{title:t('push_notification_title'),columns:columns,onChangePage:page=>HandalePageChange(page),style:{direction:isRTL===\"rtl\"?\"rtl\":\"ltr\",borderRadius:\"8px\",boxShadow:\"0px 2px 5px \".concat(SECONDORY_COLOR),padding:\"20px\"},data:data,onRowClick:(evt,selectedRow)=>setSelectedRow(selectedRow.tableData.id),options:_objectSpread({initialPage:state===null||state===void 0?void 0:state.pageNo,rowStyle:rowData=>({backgroundColor:selectedRow===rowData.tableData.id?colors.ROW_SELECTED:colors.WHITE})},TableStyle()),localization:localization(t),editable:{onRowDelete:oldData=>new Promise(resolve=>{setTimeout(()=>{resolve();dispatch(editNotifications(oldData,\"Delete\"));},600);})},actions:[{icon:'add',tooltip:t(\"add_notification\"),isFreeAction:true,onClick:event=>navigate(\"/notifications/addnotifications\",{state:{pageNo:currentPage}})}]}):/*#__PURE__*/_jsx(BlankTable,{title:t('push_notification_title'),actions:[{icon:'add',tooltip:t(\"push_notification_title\"),isFreeAction:true,onClick:event=>navigate(\"/notifications/addnotifications\")}],columns:columns,data:[],localization:localization(t),options:TableStyle()})});}","map":{"version":3,"names":["React","useState","useEffect","MaterialTable","useSelector","useDispatch","CircularLoading","api","useTranslation","colors","useNavigate","useLocation","SECONDORY_COLOR","moment","ThemeProvider","theme","TableStyle","localization","BlankTable","jsx","_jsx","Notifications","t","i18n","isRTL","dir","editNotifications","columns","title","field","defaultSort","render","rowData","createdAt","format","lookup","All","ANDROID","IOS","customer","driver","data","setData","notificationdata","state","dispatch","navigate","currentPage","setCurrentPage","pageNo","HandalePageChange","page","notifications","selectedRow","setSelectedRow","loading","children","length","onChangePage","style","direction","borderRadius","boxShadow","concat","padding","onRowClick","evt","tableData","id","options","_objectSpread","initialPage","rowStyle","backgroundColor","ROW_SELECTED","WHITE","editable","onRowDelete","oldData","Promise","resolve","setTimeout","actions","icon","tooltip","isFreeAction","onClick","event"],"sources":["C:/Users/CAJAL/Desktop/main/Sourcecode/web-app/src/views/Notifications.js"],"sourcesContent":["import React,{ useState, useEffect } from 'react';\nimport MaterialTable from 'material-table';\nimport { useSelector, useDispatch } from \"react-redux\";\nimport CircularLoading from \"../components/CircularLoading\";\nimport { api } from 'common';\nimport { useTranslation } from \"react-i18next\";\nimport {colors} from '../components/Theme/WebTheme';\nimport {  useNavigate,useLocation } from 'react-router-dom';\nimport { SECONDORY_COLOR } from \"../common/sharedFunctions\";\nimport moment from 'moment/min/moment-with-locales';\nimport { ThemeProvider } from '@mui/material/styles';\nimport theme from \"styles/tableStyle\";\nimport TableStyle from '../components/Table/Style';\nimport localization from '../components/Table/Localization';\nimport BlankTable from '../components/Table/BlankTable';\n\nexport default function Notifications() {\n  const { t, i18n  } = useTranslation();\n  const isRTL = i18n.dir();\n  const {\n    editNotifications\n  } = api;\n\n  const columns =  [\n    {\n      title:t(\"createdAt\"),\n      field:\"createdAt\",\n      defaultSort:'desc',render: rowData => rowData.createdAt? moment(rowData.createdAt).format('lll'):null\n    },\n      {\n        title: t('device_type'),\n        field: 'devicetype',\n        lookup: { All: (t('all')), ANDROID: (t('android')), IOS: (t('ios')) },\n      },\n      {\n        title: t('user_type'),\n        field: 'usertype',\n        lookup: { customer: t('customer'), driver: t('driver') },\n      },\n      { title: t('title'),field: 'title', \n    },\n      { title: t('body'), field: 'body', \n    },\n  ];\n\n  const [data, setData] = useState([]);\n  const notificationdata = useSelector(state => state.notificationdata);\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const {state} = useLocation()\n  const [currentPage,setCurrentPage] = useState(null)\n\n  useEffect(()=>{\n    setCurrentPage(state?.pageNo)\n  },[state])\n\n  const HandalePageChange = (page)=>{\n    setCurrentPage(page)\n  }\n\n  useEffect(()=>{\n        if(notificationdata.notifications){\n            setData(notificationdata.notifications);\n        }else{\n            setData([]);\n        }\n  },[notificationdata.notifications]);\n\n  const [selectedRow, setSelectedRow] = useState(null);\n  \n  return (\n    notificationdata.loading? <CircularLoading/>:\n    <ThemeProvider theme={theme}>\n      {data.length>0? \n      <MaterialTable\n      title={t('push_notification_title')}\n      columns={columns}\n      onChangePage={(page)=>HandalePageChange(page)}\n      style={{\n          direction: isRTL === \"rtl\" ? \"rtl\" : \"ltr\",\n          borderRadius: \"8px\",\n          boxShadow: `0px 2px 5px ${SECONDORY_COLOR}`,\n          padding: \"20px\",\n        }}\n        data={data}\n        onRowClick={((evt, selectedRow) => setSelectedRow(selectedRow.tableData.id))}\n        options={{\n          initialPage:state?.pageNo,\n          rowStyle: (rowData) => ({\n            backgroundColor:\n              selectedRow === rowData.tableData.id ? colors.ROW_SELECTED :colors.WHITE\n          }),\n          ...TableStyle()\n        }}\n        localization={localization(t)}\n        editable={{\n          onRowDelete: oldData =>\n            new Promise(resolve => {\n              setTimeout(() => {\n                resolve();\n                dispatch(editNotifications(oldData,\"Delete\"));\n              }, 600);\n            }),\n        }}\n        actions={[\n          {\n            icon: 'add',\n            tooltip: t(\"add_notification\"),\n            isFreeAction: true,\n            onClick: (event) => navigate(\"/notifications/addnotifications\",{state:{pageNo:currentPage}})\n          },\n        ]}\n        />\n        :<BlankTable title={t('push_notification_title')} \n        actions={[    \n          {\n            icon: 'add',\n            tooltip: t(\"push_notification_title\"),\n            isFreeAction: true,\n            onClick: (event) => navigate(\"/notifications/addnotifications\")\n          },\n        ]} columns={columns}  data={[]} localization={localization(t)} options={TableStyle()}/>\n        }\n    </ThemeProvider>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}