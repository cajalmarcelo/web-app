{"ast":null,"code":"import{FETCH_ADDRESSES,FETCH_ADDRESSES_SUCCESS,FETCH_ADDRESSES_FAILED,EDIT_ADDRESS}from\"../store/types\";import store from'../store/store';import{firebase}from'../config/configureFirebase';import{onValue,remove,push,off}from\"firebase/database\";export const fetchAddresses=()=>dispatch=>{const{addressEditRef}=firebase;dispatch({type:FETCH_ADDRESSES,payload:null});const userInfo=store.getState().auth.profile;off(addressEditRef(userInfo.uid));onValue(addressEditRef(userInfo.uid),snapshot=>{if(snapshot.val()){let data=snapshot.val();const arr=Object.keys(data).map(i=>{data[i].id=i;return data[i];});dispatch({type:FETCH_ADDRESSES_SUCCESS,payload:arr});}else{dispatch({type:FETCH_ADDRESSES_FAILED,payload:store.getState().languagedata.defaultLanguage.no_address});}});};export const editAddress=(uid,address,method)=>async dispatch=>{const{addressRef,addressEditRef}=firebase;dispatch({type:EDIT_ADDRESS,payload:{method,address}});if(method==='Add'){push(addressEditRef(uid),address);}else if(method==='Delete'){remove(addressRef(uid,address.id));}};","map":{"version":3,"names":["FETCH_ADDRESSES","FETCH_ADDRESSES_SUCCESS","FETCH_ADDRESSES_FAILED","EDIT_ADDRESS","store","firebase","onValue","remove","push","off","fetchAddresses","dispatch","addressEditRef","type","payload","userInfo","getState","auth","profile","uid","snapshot","val","data","arr","Object","keys","map","i","id","languagedata","defaultLanguage","no_address","editAddress","address","method","addressRef"],"sources":["C:/Users/CAJAL/Desktop/main/Sourcecode/common/src/actions/addressactions.js"],"sourcesContent":["import {\n    FETCH_ADDRESSES,\n    FETCH_ADDRESSES_SUCCESS,\n    FETCH_ADDRESSES_FAILED,\n    EDIT_ADDRESS\n  } from \"../store/types\";\n  import store from '../store/store';\n  import { firebase } from '../config/configureFirebase';\n  import { onValue, remove, push, off } from \"firebase/database\";\n  \n  export const fetchAddresses = () => (dispatch) => {\n  \n    const {\n      addressEditRef\n    } = firebase;\n    dispatch({\n      type: FETCH_ADDRESSES,\n      payload: null\n    });\n    const userInfo = store.getState().auth.profile;\n    off(addressEditRef(userInfo.uid));\n    onValue(addressEditRef(userInfo.uid), snapshot => {\n      if (snapshot.val()) {\n        let data = snapshot.val();\n        const arr = Object.keys(data).map(i => {\n          data[i].id = i;\n          return data[i]\n        });\n        dispatch({\n          type: FETCH_ADDRESSES_SUCCESS,\n          payload: arr\n        });\n      } else {\n        dispatch({\n          type: FETCH_ADDRESSES_FAILED,\n          payload: store.getState().languagedata.defaultLanguage.no_address\n        });\n      }\n    });\n  };\n  \n  export const editAddress = (uid, address, method) => async (dispatch) => {\n    const {\n      addressRef, \n      addressEditRef,\n    } = firebase;\n    dispatch({\n      type: EDIT_ADDRESS,\n      payload: { method, address }\n    });\n    if (method === 'Add') {\n      push(addressEditRef(uid), address);\n    } else if (method === 'Delete') {\n      remove(addressRef(uid, address.id));\n    }\n  }"],"mappings":"AAAA,OACIA,eAAe,CACfC,uBAAuB,CACvBC,sBAAsB,CACtBC,YAAY,KACP,gBAAgB,CACvB,MAAO,CAAAC,KAAK,KAAM,gBAAgB,CAClC,OAASC,QAAQ,KAAQ,6BAA6B,CACtD,OAASC,OAAO,CAAEC,MAAM,CAAEC,IAAI,CAAEC,GAAG,KAAQ,mBAAmB,CAE9D,MAAO,MAAM,CAAAC,cAAc,CAAGA,CAAA,GAAOC,QAAQ,EAAK,CAEhD,KAAM,CACJC,cACF,CAAC,CAAGP,QAAQ,CACZM,QAAQ,CAAC,CACPE,IAAI,CAAEb,eAAe,CACrBc,OAAO,CAAE,IACX,CAAC,CAAC,CACF,KAAM,CAAAC,QAAQ,CAAGX,KAAK,CAACY,QAAQ,CAAC,CAAC,CAACC,IAAI,CAACC,OAAO,CAC9CT,GAAG,CAACG,cAAc,CAACG,QAAQ,CAACI,GAAG,CAAC,CAAC,CACjCb,OAAO,CAACM,cAAc,CAACG,QAAQ,CAACI,GAAG,CAAC,CAAEC,QAAQ,EAAI,CAChD,GAAIA,QAAQ,CAACC,GAAG,CAAC,CAAC,CAAE,CAClB,GAAI,CAAAC,IAAI,CAAGF,QAAQ,CAACC,GAAG,CAAC,CAAC,CACzB,KAAM,CAAAE,GAAG,CAAGC,MAAM,CAACC,IAAI,CAACH,IAAI,CAAC,CAACI,GAAG,CAACC,CAAC,EAAI,CACrCL,IAAI,CAACK,CAAC,CAAC,CAACC,EAAE,CAAGD,CAAC,CACd,MAAO,CAAAL,IAAI,CAACK,CAAC,CAAC,CAChB,CAAC,CAAC,CACFhB,QAAQ,CAAC,CACPE,IAAI,CAAEZ,uBAAuB,CAC7Ba,OAAO,CAAES,GACX,CAAC,CAAC,CACJ,CAAC,IAAM,CACLZ,QAAQ,CAAC,CACPE,IAAI,CAAEX,sBAAsB,CAC5BY,OAAO,CAAEV,KAAK,CAACY,QAAQ,CAAC,CAAC,CAACa,YAAY,CAACC,eAAe,CAACC,UACzD,CAAC,CAAC,CACJ,CACF,CAAC,CAAC,CACJ,CAAC,CAED,MAAO,MAAM,CAAAC,WAAW,CAAGA,CAACb,GAAG,CAAEc,OAAO,CAAEC,MAAM,GAAK,KAAO,CAAAvB,QAAQ,EAAK,CACvE,KAAM,CACJwB,UAAU,CACVvB,cACF,CAAC,CAAGP,QAAQ,CACZM,QAAQ,CAAC,CACPE,IAAI,CAAEV,YAAY,CAClBW,OAAO,CAAE,CAAEoB,MAAM,CAAED,OAAQ,CAC7B,CAAC,CAAC,CACF,GAAIC,MAAM,GAAK,KAAK,CAAE,CACpB1B,IAAI,CAACI,cAAc,CAACO,GAAG,CAAC,CAAEc,OAAO,CAAC,CACpC,CAAC,IAAM,IAAIC,MAAM,GAAK,QAAQ,CAAE,CAC9B3B,MAAM,CAAC4B,UAAU,CAAChB,GAAG,CAAEc,OAAO,CAACL,EAAE,CAAC,CAAC,CACrC,CACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module"}